<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>03_事件对象的详解</title>
  <style>
    .box {
      width: 200px;
      height: 200px;
      background-color: #d3cd78;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px;
    }

    .btn {
      padding: 8px 16px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="box">
    <button class="btn">btn</button>
  </div>

  <script>
    // 获取元素
    const btnEl = document.querySelector('.btn');
    const box = document.querySelector('.box');

    // 为按钮绑定点击事件，对比事件对象
    btnEl.onclick = function (event) {
      console.log('===== 按钮点击 - 事件对象 =====');
      console.log('1. 事件类型 type：', event.type); // "click"
      console.log('2. 事件阶段 eventPhase：', event.eventPhase); // 2（目标阶段）
      console.log('3. 触发元素 target：', event.target); // <button>（实际点击的元素）
      console.log('4. 绑定元素 currentTarget：', event.currentTarget); // <button>（绑定事件的元素）
      console.log('5. 点击坐标 clientX/Y：', event.clientX, event.clientY); // 相对视口
      console.log('6. 点击坐标 pageX/Y：', event.pageX, event.pageY); // 相对文档
      console.log('7. 修饰键 ctrlKey：', event.ctrlKey); // 是否按Ctrl键
    }

    // 为盒子绑定点击事件（核心演示事件对象）
    box.onclick = function (event) {
      console.log('\n===== 盒子点击 - 事件对象 =====');
      // 基础属性
      console.log('1. 事件类型 type：', event.type); // "click"
      console.log('2. 事件阶段 eventPhase：', event.eventPhase); // 3（冒泡阶段，点击按钮时）/2（点击盒子空白时）
      console.log('3. 触发元素 target：', event.target); // 按钮/盒子（看实际点击位置）
      console.log('4. 绑定元素 currentTarget：', event.currentTarget); // 始终是.box

      // 坐标属性
      console.log('5. 相对视口坐标 clientX/Y：', event.clientX, event.clientY);
      console.log('6. 相对文档坐标 pageX/Y：', event.pageX, event.pageY);
      console.log('7. 相对元素坐标 offsetX/Y：', event.offsetX, event.offsetY); // 相对当前元素

      // 常用方法
      console.log('8. 是否阻止默认行为 defaultPrevented：', event.defaultPrevented); // false
      // event.preventDefault(); // 阻止默认行为（如a标签跳转、表单提交）
      // event.stopPropagation(); // 阻止事件冒泡（点击按钮时，body的事件不会触发）
      // event.stopImmediatePropagation(); // 阻止冒泡+同元素后续事件

      // 其他实用属性
      console.log('9. 鼠标按钮 button：', event.button); // 0（左键）/1（滚轮）/2（右键）
      console.log('10. 事件时间戳 timeStamp：', event.timeStamp); // 事件触发的时间戳
      console.log('11. 是否冒泡 bubbles：', event.bubbles); // true（点击事件可冒泡）
    }

    // 绑定body点击事件，演示事件冒泡
    document.body.onclick = function (event) {
      console.log('\n===== body点击 - 事件对象 =====');
      console.log('事件阶段 eventPhase：', event.eventPhase); // 2（冒泡阶段）
      console.log('触发元素 target：', event.target); // 按钮/盒子
      console.log('绑定元素 currentTarget：', event.currentTarget); // body
    }

    // 补充：捕获阶段监听（addEventListener 第三个参数为true）
    box.addEventListener('click', function (event) {
      console.log('\n===== 盒子捕获阶段 - 事件对象 =====');
      console.log('事件阶段 eventPhase：', event.eventPhase); // 1（捕获阶段）
    }, true);

    // 事件对象核心总结
    console.log(`
      【核心属性】
      - type：事件类型（click/mouseover等）
      - eventPhase：1(捕获)/2(目标)/3(冒泡)
      - target：实际触发元素 | currentTarget：绑定事件元素
      - clientX/Y：相对视口 | pageX/Y：相对文档 | offsetX/Y：相对当前元素
      
      【核心方法】
      - preventDefault()：阻止默认行为
      - stopPropagation()：阻止事件冒泡
      - stopImmediatePropagation()：阻止冒泡+同元素后续事件
    `);
  </script>
</body>

</html>